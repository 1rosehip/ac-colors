"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var Color=function(){function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{color:[0,0,0],type:"rgb",precision:3,capitalize:!0},e=t.color,r=void 0===e?[0,0,0]:e,a=t.type,n=void 0===a?"rgb":a,o=t.precision,i=void 0===o?3:o,s=t.capitalize,u=void 0===s||s;_classCallCheck(this,h),this.updateColor(r,n),this.precision=i,this.capitalize=u}return _createClass(h,[{key:"updateColor",value:function(t,e){var r,a=1<arguments.length&&void 0!==e?e:"rgb";if("string"!=typeof a)throw new TypeError("Parameter 2 must be of type string.");if(a=a.toLowerCase(),!h.validTypes.includes(a))throw new TypeError("Parameter 2 '".concat(a,"' is not a valid type."));switch(a){case"hsl":r=h.hslToRgb(t);break;case"hex":r=h.hexToRgb(t);break;case"xyz":r=h.xyzToRgb(t);break;case"lab":r=h.xyzToRgb(h.labToXyz(t));break;case"lchab":r=h.xyzToRgb(h.labToXyz(h.lchABToLab(t)));break;case"rgb":case"default":t=(t=(t=t.map(function(t){return Math.min(255,t)})).map(function(t){return Math.max(0,t)})).map(Math.round),this._rgb=t,this._hsl=h.rgbToHsl(this._rgb),this._hex=h.rgbToHex(this._rgb),this._xyz=h.rgbToXyz(this._rgb),this._lab=h.xyzToLab(this._xyz),this._lchab=h.labToLCHab(this._lab)}"rgb"!==a&&this.updateColor(r,"rgb")}},{key:"rgb",get:function(){return this._rgb},set:function(t){this.updateColor(t,"rgb")}},{key:"rgbString",get:function(){var t="RGB("+this.rgb.join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"hsl",get:function(){return this._hsl},set:function(t){this.updateColor(t,"hsl")}},{key:"hslString",get:function(){var e=this,t="HSL("+this.hsl.map(function(t){return t.toFixed(e.precision)}).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"hex",get:function(){return this._hex},set:function(t){this.updateColor(t,"hex")}},{key:"hexString",get:function(){var t=this._hex;return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"xyz",get:function(){return this._xyz},set:function(t){this.updateColor(t,"xyz")}},{key:"xyzString",get:function(){var e=this,t="XYZ("+this.xyz.map(function(t){return t.toFixed(e.precision)}).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"lab",get:function(){return this._lab},set:function(t){this.updateColor(t,"lab")}},{key:"labString",get:function(){var e=this,t="LAB("+this.lab.map(function(t){return t.toFixed(e.precision)}).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"lchab",get:function(){return this._lchab},set:function(t){this.updateColor(t,"lchab")}},{key:"lchabString",get:function(){var e=this,t=this.lchab.map(function(t){return t.toFixed(e.precision)});return this.capitalize?"LCHab("+t.join(", ")+")":"lchAB("+t.join(", ")+")"}}],[{key:"rgbToHsl",value:function(t){var e=t[0]/255,r=t[1]/255,a=t[2]/255,n=Math.max(e,r,a),o=Math.min(e,r,a),i=(n+o)/2,s=0,u=0;return n!==o&&(s=i<.5?(n-o)/(n+o):(n-o)/(2-n-o),u=e===n?(r-a)/(n-o):r===n?2+(a-e)/(n-o):4+(e-r)/(n-o)),(u*=60)<0&&(u+=360),[u,s*=100,i*=100]}},{key:"hslToRgb",value:function(t){var e=t[0],r=t[1],a=t[2];isFinite(e)||(e=0),isFinite(r)||(r=0),isFinite(a)||(a=0),(e/=60)<0&&(e=6- -e%6),e%=6,r=Math.max(0,Math.min(1,r/100)),a=Math.max(0,Math.min(1,a/100));var n,o,i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(e%2-1)),u=e<1?(n=i,o=s,0):e<2?(n=s,o=i,0):e<3?(n=0,o=i,s):e<4?(n=0,o=s,i):e<5?(n=s,o=0,i):(n=i,o=0,s),h=a-i/2;return[n=Math.round(255*(n+h)),o=Math.round(255*(o+h)),u=Math.round(255*(u+h))]}},{key:"rgbToHex",value:function(t){function e(t){var e=t.toString(16);return 1===e.length?"0"+e:e}var r=t[0],a=t[1],n=t[2];return"#"+e(r)+e(a)+e(n)}},{key:"hexToRgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,a){return e+e+r+r+a+a});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}},{key:"rgbToXyz",value:function(t){function e(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}var r=t[0]/255,a=t[1]/255,n=t[2]/255,o=e(r),i=e(a),s=e(n);return[100*(.4124*o+.3576*i+.1805*s),100*(.2126*o+.7152*i+.0722*s),100*(.0193*o+.1192*i+.9505*s)]}},{key:"xyzToRgb",value:function(t){function e(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}var r=t[0]/100,a=t[1]/100,n=t[2]/100,o=-.9689307147293197*r+1.8757560608852415*a+.041517523842953964*n,i=.055710120445510616*r+-.2040210505984867*a+1.0569959422543882*n,s=e(3.2406254773200533*r-1.5372079722103187*a-.4986285986982479*n),u=e(o),h=e(i);return[Math.round(255*s),Math.round(255*u),Math.round(255*h)]}},{key:"xyzToLab",value:function(t){function e(t){return 216/24389<t?Math.pow(t,1/3):(24389/27*t+16)/116}var r=[95.05,100,108.9],a=t[0]/r[0],n=t[1]/r[1],o=t[2]/r[2],i=e(a),s=e(n);return[116*s-16,500*(i-s),200*(s-e(o))]}},{key:"labToXyz",value:function(t){var e=t[0],r=t[1],a=[95.05,100,108.9],n=216/24389,o=24389/27,i=(e+16)/116,s=i-t[2]/200,u=r/500+i,h=Math.pow(u,3)>n?Math.pow(u,3):(116*u-16)/o,l=8<e?Math.pow((e+16)/116,3):e/o,c=Math.pow(s,3)>n?Math.pow(s,3):(116*s-16)/o;return[h*a[0],l*a[1],c*a[2]]}},{key:"labToLCHab",value:function(t){var e=t[1],r=t[2],a=Math.sqrt(e*e+r*r),n=0<=Math.atan2(r,e)?Math.atan2(r,e)/Math.PI*180:Math.atan2(r,e)/Math.PI*180+360;return[t[0],a,n]}},{key:"lchABToLab",value:function(t){var e=t[1],r=t[2],a=e*Math.cos(r/180*Math.PI),n=e*Math.sin(r/180*Math.PI);return[t[0],a,n]}},{key:"luminance",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:"rgb";if("string"!=typeof r)throw new TypeError("Parameter 2 must be of type string.");if(r=r.toLowerCase(),!h.validTypes.includes(r))throw new TypeError("Parameter 2 '".concat(r,"' is not a valid type."));"rgb"!==r&&(t=new h({color:t,type:r}).rgb);for(var a=0;a<t.length;a++)t[a]/=255,t[a]<.03928?t[a]/=12.92:t[a]=Math.pow((t[a]+.055)/1.055,2.4);return.2126*t[0]+.7152*t[1]+.0722*t[2]}},{key:"random",value:function(){return new h({color:[255,255,255].map(function(t){return t*Math.random()})})}},{key:"randomOfType",value:function(t){var e=0<arguments.length&&void 0!==t?t:"rgb";if("string"!=typeof e)throw new TypeError("Parameter 1 must be of type string.");if(e=e.toLowerCase(),!h.validTypes.includes(e))throw new TypeError("Parameter 1 '".concat(e,"' is not a valid type."));return h.random()[e]}},{key:"randomOfTypeFormatted",value:function(t,e,r){var a=0<arguments.length&&void 0!==t?t:"rgb",n=!(1<arguments.length&&void 0!==e)||e,o=2<arguments.length&&void 0!==r?r:3;if("string"!=typeof a)throw new TypeError("Parameter 1 must be of type string.");if(a=a.toLowerCase(),!h.validTypes.includes(a))throw new TypeError("Parameter 1 '".concat(a,"' is not a valid type."));var i=h.random();return i.capitalize=n,i.precision=o,i[a+"String"]}},{key:"contrastTextColor",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:"rgb";if("string"!=typeof r)throw new TypeError("Parameter 2 must be of type string.");if(r=r.toLowerCase(),!h.validTypes.includes(r))throw new TypeError("Parameter 2 '".concat(r,"' is not a valid type."));var a=h.contrastRatio(new h({color:[255,255,255]}),new h({color:t,type:r}));return h.contrastRatio(new h({color:[0,0,0]}),new h({color:t,type:r}))<a?"#FFFFFF":"#000000"}},{key:"contrastRatio",value:function(t,e){if(!(t instanceof h))throw new TypeError("Parameter 1 must be of type Color.");if(!(e instanceof h))throw new TypeError("Parameter 2 must be of type Color.");var r=h.luminance(t.rgb)+.05,a=h.luminance(e.rgb)+.05;return r<a?a/r:r/a}}]),h}();Color.validTypes=["rgb","hex","hsl","xyz","lab","lchab"],module.exports=Color;