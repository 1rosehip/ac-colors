"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var Color=function(){function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{color:[0,0,0],type:"rgb",precision:3,capitalize:!0},e=t.color,r=void 0===e?[0,0,0]:e,n=t.type,a=void 0===n?"rgb":n,o=t.precision,i=void 0===o?3:o,u=t.capitalize,s=void 0===u||u;_classCallCheck(this,f),this.updateColor(r,a),this.precision=i,this.capitalize=s}return _createClass(f,[{key:"updateColor",value:function(t,e){var r,n=1<arguments.length&&void 0!==e?e:"rgb";if("string"!=typeof n)throw new TypeError("Parameter 2 must be of type string.");if(n=n.toLowerCase(),!f.validTypes.includes(n))throw new TypeError("Parameter 2 '".concat(n,"' is not a valid type."));switch(n){case"rgb":r=f.rgbToXyz(t);break;case"hsl":r=f.rgbToXyz(f.hslToRgb(t));break;case"hex":r=f.rgbToXyz(f.hexToRgb(t));break;case"lab":r=f.labToXyz(t);break;case"lchab":r=f.labToXyz(f.lchABToLab(t));break;case"luv":r=f.luvToXyz(t);break;case"lchuv":r=f.luvToXyz(f.lchUVToLuv(t));break;case"xyz":case"default":this._xyz=t,this._rgb=f.xyzToRgb(this._xyz),this._hsl=f.rgbToHsl(this._rgb),this._hex=f.rgbToHex(this._rgb),this._lab=f.xyzToLab(this._xyz),this._lchab=f.labToLCHab(this._lab),this._luv=f.xyzToLuv(this._xyz),this._lchuv=f.luvToLCHuv(this._luv)}"xyz"!==n&&this.updateColor(r,"xyz")}},{key:"rgb",get:function(){return this._rgb},set:function(t){this.updateColor(t,"rgb")}},{key:"rgbString",get:function(){var t="RGB("+this.rgb.join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"hsl",get:function(){return this._hsl},set:function(t){this.updateColor(t,"hsl")}},{key:"hslString",get:function(){var e=this,t="HSL("+this.hsl.map(function(t){return t.toFixed(e.precision)}).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"hex",get:function(){return this._hex},set:function(t){this.updateColor(t,"hex")}},{key:"hexString",get:function(){var t=this._hex;return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"xyz",get:function(){return this._xyz},set:function(t){this.updateColor(t,"xyz")}},{key:"xyzString",get:function(){var e=this,t="XYZ("+this.xyz.map(function(t){return t.toFixed(e.precision)}).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"lab",get:function(){return this._lab},set:function(t){this.updateColor(t,"lab")}},{key:"labString",get:function(){var e=this,t="LAB("+this.lab.map(function(t){return t.toFixed(e.precision)}).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"lchab",get:function(){return this._lchab},set:function(t){this.updateColor(t,"lchab")}},{key:"lchabString",get:function(){var e=this,t=this.lchab.map(function(t){return t.toFixed(e.precision)});return this.capitalize?"LCHab("+t.join(", ")+")":"lchAB("+t.join(", ")+")"}},{key:"luv",get:function(){return this._luv},set:function(t){this.updateColor(t,"luv")}},{key:"luvString",get:function(){var e=this,t="LUV("+this.luv.map(function(t){return t.toFixed(e.precision)}).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}},{key:"lchuv",get:function(){return this._lchuv},set:function(t){this.updateColor(t,"lchuv")}},{key:"lchuvString",get:function(){var e=this,t=this.lchuv.map(function(t){return t.toFixed(e.precision)});return this.capitalize?"LCHuv("+t.join(", ")+")":"lchuv("+t.join(", ")+")"}}],[{key:"rgbToHsl",value:function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),o=Math.min(e,r,n),i=(a+o)/2,u=0,s=0;return a!==o&&(u=i<.5?(a-o)/(a+o):(a-o)/(2-a-o),s=e===a?(r-n)/(a-o):r===a?2+(n-e)/(a-o):4+(e-r)/(a-o)),[(s=(s*=60)<0?s%360+360:s)+0,(u*=100)+0,(i*=100)+0]}},{key:"hslToRgb",value:function(t){var e=t[0],r=t[1],n=t[2];isFinite(e)||(e=0),isFinite(r)||(r=0),isFinite(n)||(n=0),e=e<0?e%360+360:e,n/=100,r/=100,e/=60;var a=(1-Math.abs(2*n-1))*r,o=a*(1-Math.abs(e%2-1)),i=n-a/2,u=e<1?[a,o,0]:e<2?[o,a,0]:e<3?[0,a,o]:e<4?[0,o,a]:e<5?[o,0,a]:[a,0,o];return u.map(function(t){return Math.round(255*(t+i))+0})}},{key:"rgbToHex",value:function(t){function e(t){var e=t.toString(16);return 1===e.length?"0"+e:e}var r=t[0],n=t[1],a=t[2];return"#"+e(r)+e(n)+e(a)}},{key:"hexToRgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,r,n){return e+e+r+r+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}},{key:"rgbToXyz",value:function(t){function e(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}var r=t[0]/255,n=t[1]/255,a=t[2]/255,o=e(r),i=e(n),u=e(a);return[100*(.4124*o+.3576*i+.1805*u)+0,100*(.2126*o+.7152*i+.0722*u)+0,100*(.0193*o+.1192*i+.9505*u)+0]}},{key:"xyzToRgb",value:function(t){function e(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}var r=t[0]/100,n=t[1]/100,a=t[2]/100,o=-.9689307147293197*r+1.8757560608852415*n+.041517523842953964*a,i=.055710120445510616*r+-.2040210505984867*n+1.0569959422543882*a,u=e(3.2406254773200533*r-1.5372079722103187*n-.4986285986982479*a),s=e(o),l=e(i);return[Math.round(255*u)+0,Math.round(255*s)+0,Math.round(255*l)+0]}},{key:"xyzToLab",value:function(t){function e(t){return 216/24389<t?o(t):(24389/27*t+16)/116}var r=t[0]/f.d65[0],n=t[1]/f.d65[1],a=t[2]/f.d65[2],o=null!=Math.cbrt?Math.cbrt:function(t){return Math.pow(t,1/3)},i=e(r),u=e(n);return[116*u-16,0+500*(i-u),0+200*(u-e(a))]}},{key:"labToXyz",value:function(t){var e=t[0],r=t[1],n=216/24389,a=24389/27,o=(e+16)/116,i=o-t[2]/200,u=r/500+o,s=Math.pow(u,3)>n?Math.pow(u,3):(116*u-16)/a,l=8<e?Math.pow((e+16)/116,3):e/a,c=Math.pow(i,3)>n?Math.pow(i,3):(116*i-16)/a;return[s*f.d65[0]+0,l*f.d65[1]+0,c*f.d65[2]+0]}},{key:"labToLCHab",value:function(t){var e=t[1],r=Math.abs(t[2])<f.maxZeroTolerance?0:t[2],n=Math.sqrt(e*e+r*r),a=0<=Math.atan2(r,e)?Math.atan2(r,e)/Math.PI*180:Math.atan2(r,e)/Math.PI*180+360;return[t[0]+0,n+0,0+a]}},{key:"lchABToLab",value:function(t){var e=t[1],r=t[2],n=e*Math.cos(r/180*Math.PI),a=e*Math.sin(r/180*Math.PI);return[t[0]+0,0+n,0+a]}},{key:"xyzToLuv",value:function(t){var e=t[0],r=t[1],n=t[2],a=f.d65[0],o=f.d65[1],i=f.d65[2],u=9*o/(a+15*o+3*i),s=4*a/(a+15*o+3*i);if(0===e&&0===r&&0===n)return[0,0,0];var l=9*r/(e+15*r+3*n),c=4*e/(e+15*r+3*n),h=r/o,p=null!=Math.cbrt?Math.cbrt:function(t){return Math.pow(t,1/3)},v=216/24389<h?116*p(h,1/3)-16:24389/27*h;return[0+v,0+13*v*(c-s),0+13*v*(l-u)]}},{key:"luvToXyz",value:function(t){var e=t[0],r=t[1],n=t[2],a=f.d65[0],o=f.d65[1],i=f.d65[2],u=9*o/(a+15*o+3*i),s=4*a/(a+15*o+3*i),l=8<e?Math.pow((e+16)/116,3):e/(24389/27),c=-5*l,h=(52*e/(r+13*e*s)-1)/3||0,p=((l*(39*e/(n+13*e*u)-5)||0)-c)/(h- -1/3);return[100*p+0,100*l+0,100*(p*h+c)+0]}},{key:"luvToLCHuv",value:function(t){var e=t[0],r=Math.abs(t[1])<f.maxZeroTolerance?0:t[1],n=Math.abs(t[2])<f.maxZeroTolerance?0:t[2],a=Math.sqrt(r*r+n*n),o=180*Math.atan2(n,r)/Math.PI;return[e+0,a+0,(o=0<=o?o:o+360)+0]}},{key:"lchUVToLuv",value:function(t){var e=t[0],r=t[1],n=t[2]/180*Math.PI;return[e+0,0+r*Math.cos(n),0+r*Math.sin(n)]}},{key:"luminance",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:"rgb";if("string"!=typeof r)throw new TypeError("Parameter 2 must be of type string.");if(r=r.toLowerCase(),!f.validTypes.includes(r))throw new TypeError("Parameter 2 '".concat(r,"' is not a valid type."));"rgb"!==r&&(t=new f({color:t,type:r}).rgb);for(var n=0;n<t.length;n++)t[n]/=255,t[n]<.03928?t[n]/=12.92:t[n]=Math.pow((t[n]+.055)/1.055,2.4);return.2126*t[0]+.7152*t[1]+.0722*t[2]}},{key:"random",value:function(){return new f({color:[255,255,255].map(function(t){return Math.round(t*Math.random())})})}},{key:"randomFromString",value:function(t){function e(t){for(var e=4294967295,r=0;r<t.length;r++){var n=4026531840&(e=(e<<4)+t.charCodeAt(r));0!=n&&(e^=n>>>24,e^=n)}return Math.abs(e)}var r=0<arguments.length&&void 0!==t?t:"",n=e(r),a=e(r+n);return new f({color:[n%256,a%256,e(r+a)%256]})}},{key:"randomOfType",value:function(t){var e=0<arguments.length&&void 0!==t?t:"rgb";if("string"!=typeof e)throw new TypeError("Parameter 1 must be of type string.");if(e=e.toLowerCase(),!f.validTypes.includes(e))throw new TypeError("Parameter 1 '".concat(e,"' is not a valid type."));return f.random()[e]}},{key:"randomOfTypeFormatted",value:function(t,e,r){var n=0<arguments.length&&void 0!==t?t:"rgb",a=!(1<arguments.length&&void 0!==e)||e,o=2<arguments.length&&void 0!==r?r:3;if("string"!=typeof n)throw new TypeError("Parameter 1 must be of type string.");if(n=n.toLowerCase(),!f.validTypes.includes(n))throw new TypeError("Parameter 1 '".concat(n,"' is not a valid type."));var i=f.random();return i.capitalize=a,i.precision=o,i[n+"String"]}},{key:"contrastTextColor",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:"rgb";if("string"!=typeof r)throw new TypeError("Parameter 2 must be of type string.");if(r=r.toLowerCase(),!f.validTypes.includes(r))throw new TypeError("Parameter 2 '".concat(r,"' is not a valid type."));var n=f.contrastRatio(new f({color:[255,255,255]}),new f({color:t,type:r}));return f.contrastRatio(new f({color:[0,0,0]}),new f({color:t,type:r}))<n?"#FFFFFF":"#000000"}},{key:"contrastRatio",value:function(t,e){if(!(t instanceof f))throw new TypeError("Parameter 1 must be of type Color.");if(!(e instanceof f))throw new TypeError("Parameter 2 must be of type Color.");var r=f.luminance(t.rgb)+.05,n=f.luminance(e.rgb)+.05;return r<n?n/r:r/n}}]),f}();Color.validTypes=["rgb","hex","hsl","xyz","lab","lchab","luv","lchuv"],Color.d65=[95.05,100,108.9],Color.maxZeroTolerance=Math.pow(10,-12),module.exports=Color;